<div class="container">
  @if (reviewService.reviews().length) {
  <div style="margin-bottom: 1rem">
    <label for="titleFilter">Filter reviews by title:</label>
    <input
      id="titleFilter"
      type="text"
      [value]="filterTitle()"
      (input)="filterTitle.set($event.target.value)"
    />
    <button
      *ngIf="filterTitle().trim().length > 0"
      class="clearFilterBtn"
      (click)="filterTitle.set('')"
    >
      Clear
    </button>
  </div>

  <table>
    <caption>
      Product Reviews
    </caption>
    <thead>
      <tr>
        <th>Username</th>
        <th>Title</th>
        <th>Review</th>
        <th>Helpful</th>
        <th>Most Helpful</th>
      </tr>
    </thead>
    <tbody>
      @if (filteredReviews().length) { @for (review of filteredReviews(); track review.id) {
      <app-review-list-item [review]="review">
        <ng-template let-r>
          @if (highestHelpfulCount() > 0 && r.helpfulCount === highestHelpfulCount()) {
          <span aria-label="Most helpful" title="Most helpful">‚≠ê</span>
          }
        </ng-template>
      </app-review-list-item>
      } } @else if (filterTitle().trim()) {
      <tr>
        <td colspan="5">No reviews match the filter</td>
      </tr>
      }
    </tbody>
  </table>
  } @else if (!isLoading()) {
  <div>No reviews found for the selected product</div>
  }
</div>
